\doxysection{/home/honeyguide/\+Desktop/\+My\+Open\+Source/facad/src/dir\+\_\+analytics.h File Reference}
\hypertarget{dir__analytics_8h}{}\label{dir__analytics_8h}\index{/home/honeyguide/Desktop/MyOpenSource/facad/src/dir\_analytics.h@{/home/honeyguide/Desktop/MyOpenSource/facad/src/dir\_analytics.h}}


Header file for directory analysis functionality.  


This graph shows which files directly or indirectly include this file\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{de/d5f/dir__analytics_8h__dep__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{dir__analytics_8h_ab481a931e3944eefb982e2666223d3d5}{print\+\_\+dir\+\_\+analytics}} (const char \texorpdfstring{$\ast$}{*}path)
\begin{DoxyCompactList}\small\item\em Prints detailed analytics about a directory. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Header file for directory analysis functionality. 

This file contains the declaration of functions for generating and displaying detailed analytics about directory contents. It provides an interface for examining file sizes, counts, timestamps, and other attributes within a directory structure.

\begin{DoxyAuthor}{Author}
Sergey Veneckiy 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2024 
\end{DoxyDate}


Definition in file \mbox{\hyperlink{dir__analytics_8h_source}{dir\+\_\+analytics.\+h}}.



\doxysubsection{Function Documentation}
\Hypertarget{dir__analytics_8h_ab481a931e3944eefb982e2666223d3d5}\label{dir__analytics_8h_ab481a931e3944eefb982e2666223d3d5} 
\index{dir\_analytics.h@{dir\_analytics.h}!print\_dir\_analytics@{print\_dir\_analytics}}
\index{print\_dir\_analytics@{print\_dir\_analytics}!dir\_analytics.h@{dir\_analytics.h}}
\doxysubsubsection{\texorpdfstring{print\_dir\_analytics()}{print\_dir\_analytics()}}
{\footnotesize\ttfamily void print\+\_\+dir\+\_\+analytics (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{path }\end{DoxyParamCaption})}



Prints detailed analytics about a directory. 

This function analyzes the contents of the specified directory and prints various statistics including\+:
\begin{DoxyItemize}
\item Total size of all files
\item Number of files and directories
\item Depth of the directory tree
\item File size ranges (smallest and largest)
\item Newest and oldest files
\item File type distributions
\item Permissions and ownership information
\end{DoxyItemize}

The analytics provide a comprehensive overview of the directory\textquotesingle{}s contents, useful for storage management and content analysis.


\begin{DoxyParams}{Parameters}
{\em path} & The path of the directory to analyze\\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
This function performs a recursive analysis and may take considerable time for large directory structures.
\end{DoxyNote}
\begin{DoxyWarning}{Warning}
For very large directories, this function may consume significant memory and processing resources.
\end{DoxyWarning}
This function analyzes the contents of the specified directory and prints various statistics including total size, file counts, directory depth, and information about largest and newest files.


\begin{DoxyParams}{Parameters}
{\em path} & The path of the directory to analyze. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{dir__analytics_8c_source_l00211}{211}} of file \mbox{\hyperlink{dir__analytics_8c_source}{dir\+\_\+analytics.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00212\ \ \ \ \ DIR*\ dir;}
\DoxyCodeLine{00213\ \ \ \ \ \textcolor{keyword}{struct\ }dirent*\ entry;}
\DoxyCodeLine{00214\ \ \ \ \ \textcolor{keyword}{struct\ }stat\ st;}
\DoxyCodeLine{00215\ \ \ \ \ off\_t\ largest\_size\ =\ 0;}
\DoxyCodeLine{00216\ \ \ \ \ \textcolor{keywordtype}{int}\ total\_files\ =\ 0,\ total\_dirs\ =\ 0,\ empty\_files\ =\ 0,\ max\_depth\ =\ 0;}
\DoxyCodeLine{00217\ \ \ \ \ time\_t\ newest\_time\ =\ 0,\ oldest\_time\ =\ time(NULL);}
\DoxyCodeLine{00218\ \ \ \ \ \textcolor{keywordtype}{char}\ largest\_file[\mbox{\hyperlink{dir__analytics_8c_ab99ded389af74001a6298fc9e44e74e5}{MAX\_PATH}}]\ =\ \textcolor{stringliteral}{"{}"{}},\ newest\_file[\mbox{\hyperlink{dir__analytics_8c_ab99ded389af74001a6298fc9e44e74e5}{MAX\_PATH}}]\ =\ \textcolor{stringliteral}{"{}"{}},\ oldest\_file[\mbox{\hyperlink{dir__analytics_8c_ab99ded389af74001a6298fc9e44e74e5}{MAX\_PATH}}]\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00219\ \ \ \ \ \textcolor{keywordtype}{char}\ empty\_file\_names[\mbox{\hyperlink{dir__analytics_8c_a2c5eecb22513a88c24ae5831a3265e54}{MAX\_FILES}}][256];}
\DoxyCodeLine{00220\ \ \ \ \ \textcolor{keywordtype}{char}\ deepest\_dir[\mbox{\hyperlink{dir__analytics_8c_ab99ded389af74001a6298fc9e44e74e5}{MAX\_PATH}}]\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00221\ }
\DoxyCodeLine{00222\ \ \ \ \ dir\ =\ opendir(path);}
\DoxyCodeLine{00223\ \ \ \ \ \textcolor{keywordflow}{if}\ (!dir)\ \{}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ perror(\textcolor{stringliteral}{"{}Error\ opening\ directory"{}});}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00226\ \ \ \ \ \}}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00228\ \ \ \ \ \textcolor{comment}{//\ Find\ the\ largest\ file\ recursively}}
\DoxyCodeLine{00229\ \ \ \ \ \mbox{\hyperlink{dir__analytics_8c_a65261c711a51d2667c1726615395d524}{find\_largest\_file}}(path,\ \&largest\_size,\ largest\_file,\ \textcolor{keyword}{sizeof}(largest\_file));}
\DoxyCodeLine{00230\ }
\DoxyCodeLine{00231\ \ \ \ \ \textcolor{comment}{//\ Calculate\ total\ size\ recursively}}
\DoxyCodeLine{00232\ \ \ \ \ off\_t\ total\_size\ =\ \mbox{\hyperlink{dir__analytics_8c_a247c94a71c4183e613d8a5329615c165}{calculate\_total\_size}}(path);}
\DoxyCodeLine{00233\ }
\DoxyCodeLine{00234\ \ \ \ \ \textcolor{keywordflow}{while}\ ((entry\ =\ readdir(dir))\ !=\ NULL)\ \{}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ full\_path[\mbox{\hyperlink{dir__analytics_8c_ab99ded389af74001a6298fc9e44e74e5}{MAX\_PATH}}];}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ snprintf(full\_path,\ \textcolor{keyword}{sizeof}(full\_path),\ \textcolor{stringliteral}{"{}\%s/\%s"{}},\ path,\ entry-\/>d\_name);}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (lstat(full\_path,\ \&st)\ !=\ 0)\ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (strcmp(entry-\/>d\_name,\ \textcolor{stringliteral}{"{}."{}})\ ==\ 0\ ||\ strcmp(entry-\/>d\_name,\ \textcolor{stringliteral}{"{}.."{}})\ ==\ 0)\ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (S\_ISDIR(st.st\_mode))\ \{}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \ \ \ \ total\_dirs++;}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (S\_ISREG(st.st\_mode))\ \{}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \ \ \ \ total\_files++;}
\DoxyCodeLine{00245\ }
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Check\ for\ largest\ file}}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (st.st\_size\ >\ largest\_size)\ \{}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ largest\_size\ =\ st.st\_size;}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ strncpy(largest\_file,\ entry-\/>d\_name,\ \textcolor{keyword}{sizeof}(largest\_file)\ -\/\ 1);}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00251\ }
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Check\ for\ newest\ file}}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (st.st\_mtime\ >\ newest\_time)\ \{}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ newest\_time\ =\ st.st\_mtime;}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ strncpy(newest\_file,\ entry-\/>d\_name,\ \textcolor{keyword}{sizeof}(newest\_file)\ -\/\ 1);}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00257\ }
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Check\ for\ oldest\ file}}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (st.st\_mtime\ <\ oldest\_time)\ \{}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ oldest\_time\ =\ st.st\_mtime;}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ strncpy(oldest\_file,\ entry-\/>d\_name,\ \textcolor{keyword}{sizeof}(oldest\_file)\ -\/\ 1);}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00263\ }
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Check\ for\ empty\ files}}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (st.st\_size\ ==\ 0)\ \{}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ strncpy(empty\_file\_names[empty\_files],\ entry-\/>d\_name,\ 255);}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ empty\_file\_names[empty\_files][255]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ empty\_files++;}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00271\ \ \ \ \ \}}
\DoxyCodeLine{00272\ \ \ \ \ closedir(dir);}
\DoxyCodeLine{00273\ }
\DoxyCodeLine{00274\ \ \ \ \ \textcolor{comment}{//\ Calculate\ max\ depth\ and\ find\ deepest\ directory}}
\DoxyCodeLine{00275\ \ \ \ \ \mbox{\hyperlink{dir__analytics_8c_a8ed5df60e8023eb58017d81b7642b2d4}{recursive\_dir\_scan}}(path,\ \&max\_depth,\ 0,\ deepest\_dir);}
\DoxyCodeLine{00276\ }
\DoxyCodeLine{00277\ \ \ \ \ \textcolor{keywordtype}{char}\ cwd[\mbox{\hyperlink{dir__analytics_8c_ab99ded389af74001a6298fc9e44e74e5}{MAX\_PATH}}];}
\DoxyCodeLine{00278\ \ \ \ \ \textcolor{keywordflow}{if}\ (getcwd(cwd,\ \textcolor{keyword}{sizeof}(cwd))\ ==\ NULL)\ \{}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ perror(\textcolor{stringliteral}{"{}getcwd()\ error"{}});}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00281\ \ \ \ \ \}}
\DoxyCodeLine{00282\ }
\DoxyCodeLine{00283\ \ \ \ \ \textcolor{comment}{//\ Print\ analytics}}
\DoxyCodeLine{00284\ \ \ \ \ printf(\textcolor{stringliteral}{"{}\%s\%s\%s\(\backslash\)n"{}},\ \mbox{\hyperlink{dir__analytics_8c_a46587b83544b8e9be045bb93f644ac82}{ANSI\_BOLD}},\ cwd,\ \mbox{\hyperlink{dir__analytics_8c_af77a445894f2f750d43cf2182cd29e55}{ANSI\_RESET}});}
\DoxyCodeLine{00285\ \ \ \ \ printf(\textcolor{stringliteral}{"{}🧮\ Total\ Size\ \ \ \ :\ \%s\(\backslash\)n"{}},\ \mbox{\hyperlink{dir__analytics_8c_a33a98d6f57285ecc9ccbd6c2f2b4fd9d}{format\_size}}(total\_size));}
\DoxyCodeLine{00286\ \ \ \ \ printf(\textcolor{stringliteral}{"{}🗂️\ Directories\ \ \ :\ \%d\(\backslash\)n"{}},\ total\_dirs);}
\DoxyCodeLine{00287\ \ \ \ \ printf(\textcolor{stringliteral}{"{}🌳\ Max\ Depth\ \ \ \ \ :\ \%d\ levels\(\backslash\)n"{}},\ max\_depth);}
\DoxyCodeLine{00288\ \ \ \ \ printf(\textcolor{stringliteral}{"{}📁\ Deepest\ Dir\ \ \ :\ \%s\(\backslash\)n"{}},\ deepest\_dir);}
\DoxyCodeLine{00289\ \ \ \ \ printf(\textcolor{stringliteral}{"{}🗃️\ Files\ \ \ \ \ \ \ \ \ :\ \%d\(\backslash\)n"{}},\ total\_files);}
\DoxyCodeLine{00290\ \ \ \ \ printf(\textcolor{stringliteral}{"{}🐘\ Largest\ File\ \ :\ \%s\ [\%s]\(\backslash\)n"{}},\ largest\_file,\ \mbox{\hyperlink{dir__analytics_8c_a33a98d6f57285ecc9ccbd6c2f2b4fd9d}{format\_size}}(largest\_size));}
\DoxyCodeLine{00291\ \ \ \ \ printf(\textcolor{stringliteral}{"{}🏺\ Oldest\ File\ \ \ :\ \%s\ [\%s]\(\backslash\)n"{}},\ oldest\_file,\ \mbox{\hyperlink{dir__analytics_8c_af2d4fbcabe2bb660a865a1a3beb3ee18}{format\_time}}(oldest\_time));}
\DoxyCodeLine{00292\ \ \ \ \ printf(\textcolor{stringliteral}{"{}🆕\ Newest\ File\ \ \ :\ \%s\ [\%s]\(\backslash\)n"{}},\ newest\_file,\ \mbox{\hyperlink{dir__analytics_8c_af2d4fbcabe2bb660a865a1a3beb3ee18}{format\_time}}(newest\_time));}
\DoxyCodeLine{00293\ \ \ \ \ printf(\textcolor{stringliteral}{"{}📭\ Empty\ Files\ \ \ :\ \%d\ ["{}},\ empty\_files);}
\DoxyCodeLine{00294\ }
\DoxyCodeLine{00295\ \ \ \ \ \textcolor{comment}{//\ Print\ names\ of\ empty\ files}}
\DoxyCodeLine{00296\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ empty\_files;\ i++)\ \{}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}\%s\%s"{}},\ empty\_file\_names[i],\ (i\ +\ 1\ <\ empty\_files)\ ?\ \textcolor{stringliteral}{"{}\ "{}}\ :\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00298\ \ \ \ \ \}}
\DoxyCodeLine{00299\ \ \ \ \ printf(\textcolor{stringliteral}{"{}]\(\backslash\)n"{}});}
\DoxyCodeLine{00300\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{dir__analytics_8c_source_l00032}{ANSI\+\_\+\+BOLD}}, \mbox{\hyperlink{dir__analytics_8c_source_l00033}{ANSI\+\_\+\+RESET}}, \mbox{\hyperlink{dir__analytics_8c_source_l00115}{calculate\+\_\+total\+\_\+size()}}, \mbox{\hyperlink{dir__analytics_8c_source_l00170}{find\+\_\+largest\+\_\+file()}}, \mbox{\hyperlink{dir__analytics_8c_source_l00041}{format\+\_\+size()}}, \mbox{\hyperlink{dir__analytics_8c_source_l00064}{format\+\_\+time()}}, \mbox{\hyperlink{dir__analytics_8c_source_l00029}{MAX\+\_\+\+FILES}}, \mbox{\hyperlink{dir__analytics_8c_source_l00028}{MAX\+\_\+\+PATH}}, and \mbox{\hyperlink{dir__analytics_8c_source_l00079}{recursive\+\_\+dir\+\_\+scan()}}.



Referenced by \mbox{\hyperlink{main_8c_source_l00275}{main()}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=335pt]{da/dca/dir__analytics_8h_ab481a931e3944eefb982e2666223d3d5_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=263pt]{da/dca/dir__analytics_8h_ab481a931e3944eefb982e2666223d3d5_icgraph}
\end{center}
\end{figure}
